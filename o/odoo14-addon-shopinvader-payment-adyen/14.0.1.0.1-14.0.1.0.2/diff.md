# Comparing `tmp/odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1-py3-none-any.whl.zip` & `tmp/odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 14868 bytes, number of entries: 19
--rw-r--r--  2.0 unx     2303 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/README.rst
--rw-r--r--  2.0 unx       48 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/__init__.py
--rw-r--r--  2.0 unx      599 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/__manifest__.py
--rw-r--r--  2.0 unx       49 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/components/__init__.py
--rw-r--r--  2.0 unx      456 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/components/payment_transaction_event_listener.py
--rw-r--r--  2.0 unx      419 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/demo/payment_demo.xml
--rw-r--r--  2.0 unx      341 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/i18n/shopinvader_payment_adyen.pot
--rw-r--r--  2.0 unx       89 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       55 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx       28 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/services/__init__.py
--rw-r--r--  2.0 unx      462 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/services/payment_adyen.py
--rw-r--r--  2.0 unx    11335 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/static/description/index.html
--rw-r--r--  2.0 unx       54 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/tests/__init__.py
--rw-r--r--  2.0 unx     3694 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/tests/common.py
--rw-r--r--  2.0 unx    11017 b- defN 23-Jan-19 15:32 odoo/addons/shopinvader_payment_adyen/tests/test_payment_adyen.py
--rw-r--r--  2.0 unx     2916 b- defN 23-Jan-19 15:32 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jan-19 15:32 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jan-19 15:32 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2190 b- defN 23-Jan-19 15:32 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/RECORD
-19 files, 36152 bytes uncompressed, 11040 bytes compressed:  69.5%
+Zip file size: 15045 bytes, number of entries: 19
+-rw-r--r--  2.0 unx     2303 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/README.rst
+-rw-r--r--  2.0 unx       48 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/__init__.py
+-rw-r--r--  2.0 unx      599 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/__manifest__.py
+-rw-r--r--  2.0 unx       49 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/components/__init__.py
+-rw-r--r--  2.0 unx      456 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/components/payment_transaction_event_listener.py
+-rw-r--r--  2.0 unx      419 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/demo/payment_demo.xml
+-rw-r--r--  2.0 unx      341 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/i18n/shopinvader_payment_adyen.pot
+-rw-r--r--  2.0 unx       89 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       55 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx       28 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/services/__init__.py
+-rw-r--r--  2.0 unx      462 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/services/payment_adyen.py
+-rw-r--r--  2.0 unx    11335 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/static/description/index.html
+-rw-r--r--  2.0 unx       54 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/tests/__init__.py
+-rw-r--r--  2.0 unx     4400 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/tests/common.py
+-rw-r--r--  2.0 unx    11129 b- defN 23-Jun-16 10:01 odoo/addons/shopinvader_payment_adyen/tests/test_payment_adyen.py
+-rw-r--r--  2.0 unx     2916 b- defN 23-Jun-16 10:01 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-16 10:01 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-16 10:01 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2190 b- defN 23-Jun-16 10:01 odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/RECORD
+19 files, 36970 bytes uncompressed, 11217 bytes compressed:  69.7%
```

## zipnote {}

```diff
@@ -39,20 +39,20 @@
 
 Filename: odoo/addons/shopinvader_payment_adyen/tests/common.py
 Comment: 
 
 Filename: odoo/addons/shopinvader_payment_adyen/tests/test_payment_adyen.py
 Comment: 
 
-Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/METADATA
+Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/WHEEL
+Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/top_level.txt
+Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/RECORD
+Filename: odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/shopinvader_payment_adyen/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2019 ACSONE SA/NV (http://acsone.eu).
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 
 {
     "name": "Adyen Payment Acquirer (REST, Shopinvader)",
     "summary": "Shopinvader REST Services for Adyen Payments",
-    "version": "14.0.1.0.1",
+    "version": "14.0.1.0.2",
     "author": "ACSONE SA/NV",
     "website": "https://github.com/shopinvader/odoo-shopinvader-payment",
     "maintainers": ["rousseldenis"],
     "license": "AGPL-3",
     "category": "e-commerce",
     "depends": ["shopinvader_payment", "invader_payment_adyen"],
     "demo": ["demo/payment_demo.xml"],
```

## odoo/addons/shopinvader_payment_adyen/tests/common.py

```diff
@@ -63,24 +63,42 @@
                 "reason": "075362:0000:03/2030",
                 "amount": {"currency": "EUR", "value": 299900},
                 "success": "true" if success else "false",
                 "paymentMethod": "visa",
                 "eventDate": "2020-11-23T11:14:12+01:00",
             }
         }
-        signature = generate_notification_sig(
+        signature = cls._adyen_generate_notification_sig(
             item["NotificationRequestItem"],
             transaction.acquirer_id.adyen_hmac_key,
         )
         item["NotificationRequestItem"]["additionalData"][
             "hmacSignature"
         ] = str(signature.decode("utf-8"))
         return item
 
     @classmethod
+    def _adyen_generate_notification_sig(cls, notification_request_item, hmac):
+        return generate_notification_sig(
+            notification_request_item,
+            hmac,
+        )
+
+    def _regenerate_signature(self, request):
+        for element in request.get("notificationItems"):
+            notification_req_item = element.get("NotificationRequestItem")
+            signature = self._adyen_generate_notification_sig(
+                notification_req_item,
+                self.transaction.acquirer_id.adyen_hmac_key,
+            )
+            notification_req_item["additionalData"]["hmacSignature"] = str(
+                signature.decode("utf-8")
+            )
+
+    @classmethod
     def _get_notifications(cls, transactions, success=True):
         notifications = {
             "live": "false",
             "notificationItems": [
                 cls._get_notification_item(transaction, success)
                 for transaction in transactions
             ],
```

## odoo/addons/shopinvader_payment_adyen/tests/test_payment_adyen.py

```diff
@@ -189,14 +189,16 @@
         self.transaction = self.env["payment.transaction"].browse(
             res.get("transaction_id")
         )
         request = self._get_notifications(self.transaction)
         items = request["notificationItems"]
         item = items[0]["NotificationRequestItem"]
         item["eventCode"] = "REPORT_AVAILABLE"
+        # As the content has been edited, re-generate the signature
+        self._regenerate_signature(request)
         with self.work_on_services(partner=self.partner) as work:
             self.service = work.component(usage="payment_adyen")
         self.assertEqual("draft", self.transaction.state)
         result = self.service.dispatch("webhook", params=request)
         self.assertEqual("[accepted]", result)
         self.assertEqual("draft", self.transaction.state)
```

## Comparing `odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/METADATA` & `odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-shopinvader-payment-adyen
-Version: 14.0.1.0.1
+Version: 14.0.1.0.2
 Summary: Shopinvader REST Services for Adyen Payments
 Home-page: https://github.com/shopinvader/odoo-shopinvader-payment
 Author: ACSONE SA/NV
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
```

## Comparing `odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/RECORD` & `odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 odoo/addons/shopinvader_payment_adyen/README.rst,sha256=8TrA_qCWoW492cTYQ2CDo6JqCcGMTK22EWd_wYYCBco,2303
 odoo/addons/shopinvader_payment_adyen/__init__.py,sha256=DJ37jL31qFMqkLO7lFto1WpkmH2FmmUulFP0u2nDBAA,48
-odoo/addons/shopinvader_payment_adyen/__manifest__.py,sha256=HEU_IO3fRT0Ju3I8jDIeuapdQkquipXiBk_yqZHdNg4,599
+odoo/addons/shopinvader_payment_adyen/__manifest__.py,sha256=VJQYQ-5vso6eQDyj4ja2dRAv5Ues_709l-scL3jDauo,599
 odoo/addons/shopinvader_payment_adyen/components/__init__.py,sha256=eUh4WPKNtCD0ISXhz_X3GWEH3zDoIbCw1ohuKujABD8,49
 odoo/addons/shopinvader_payment_adyen/components/payment_transaction_event_listener.py,sha256=1yweFmVx969iLoFRw7uXYA28-DtkcezLX5URogooD-4,456
 odoo/addons/shopinvader_payment_adyen/demo/payment_demo.xml,sha256=Cd-XdlNcDjALBjpXHzhBDNeArQjWlF1vCV4EHACyInQ,419
 odoo/addons/shopinvader_payment_adyen/i18n/shopinvader_payment_adyen.pot,sha256=AyzPzY6fvZoAIdVCppv0SiPLoR_D-HBQlYffHd1jWNE,341
 odoo/addons/shopinvader_payment_adyen/readme/CONTRIBUTORS.rst,sha256=nZmxy8O6XrSKJEQHgA_24GgSX2C1bHBnCH7zq2vFAwk,89
 odoo/addons/shopinvader_payment_adyen/readme/DESCRIPTION.rst,sha256=aZhCXBA7vDo3WBybv9svSPfegN1gd95iSGMMlSt_I6Y,55
 odoo/addons/shopinvader_payment_adyen/services/__init__.py,sha256=ksYsQCuSaLzCuM9VNOQZBxzY37sKqXHc61l979vSUKM,28
 odoo/addons/shopinvader_payment_adyen/services/payment_adyen.py,sha256=B201Wx0h_hkVEInXf8092E7bStkD_qyEMPI-UGWNTDA,462
 odoo/addons/shopinvader_payment_adyen/static/description/index.html,sha256=e0CtDWqJWWDlN6kfynn-eIGEFCMqfPHeRPpqG3Y3k0Y,11335
 odoo/addons/shopinvader_payment_adyen/tests/__init__.py,sha256=r7CBeHGmxkZhJ0-R4TdzWX0bnUrz_bugUlNYWf9ytRY,54
-odoo/addons/shopinvader_payment_adyen/tests/common.py,sha256=9tF8bRwOpgQKrRLgSIQOaU_SiXZqSkcRMELfFA123n0,3694
-odoo/addons/shopinvader_payment_adyen/tests/test_payment_adyen.py,sha256=yqaIru0HNXxM5_Ln5t5g3gKjhpZ7zncZR6q4Y2qzdcM,11017
-odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/METADATA,sha256=DUkXOfoX_wJ0iWSwaDYiVnd-JEHOFQzF-fcIwal8EDw,2916
-odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_shopinvader_payment_adyen-14.0.1.0.1.dist-info/RECORD,,
+odoo/addons/shopinvader_payment_adyen/tests/common.py,sha256=N2XBkXn0zOeHd0pz_xMenjrhLuC9Wo3-_u_I1ve4Mjo,4400
+odoo/addons/shopinvader_payment_adyen/tests/test_payment_adyen.py,sha256=KvHItXqg1E7_xVD9rNOhHsP7QHI6B0VMag3cyXsgZq8,11129
+odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/METADATA,sha256=LWR2R6aPYlIXE63hAt7RbFx4SkQ107GFGFymLVa9j8Q,2916
+odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_shopinvader_payment_adyen-14.0.1.0.2.dist-info/RECORD,,
```

